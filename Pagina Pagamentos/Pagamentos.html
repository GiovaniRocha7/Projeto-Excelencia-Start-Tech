<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - ExcelncIA</title>
    <link rel="stylesheet" href="Pagamentos.Css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="logo">ExcelncIA</div>
        <a href="../index.html#planos" class="back-link">Voltar para Planos</a>
    </header>

    <main class="checkout-container">
        <div class="checkout-form-section">
            <h1 class="form-title">Finalize sua Assinatura</h1>
            
            <form action="#" method="POST" class="payment-form">
                
                <fieldset>
                    <legend>1. Suas Informa√ß√µes</legend>
                    <div class="input-group">
                        <label for="name">Nome Completo</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="input-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="input-group">
                        <label for="cpf">CPF (apenas n√∫meros)</label>
                        <input type="text" id="cpf" name="cpf" maxlength="11" pattern="\d{11}" required>
                    </div>
                </fieldset>
                
                <fieldset class="payment-methods">
                    <legend>2. Escolha o M√©todo de Pagamento</legend>

                    <div class="method-options">
                        <label class="payment-option">
                            <input type="radio" name="payment_method" value="credit_card" checked onclick="showPaymentContent('card-content')">
                            üí≥ Cart√£o de Cr√©dito
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="payment_method" value="pix" onclick="showPaymentContent('pix-content')">
                            üí∞ Pix
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="payment_method" value="boleto" onclick="showPaymentContent('boleto-content')">
                            üìÑ Boleto Banc√°rio
                        </label>
                    </div>
                </fieldset>

                <div id="card-content" class="payment-content active">
                    <fieldset class="sub-fieldset">
                        <div class="input-group">
                            <label for="card-number">N√∫mero do Cart√£o</label>
                            <input type="text" id="card-number" name="card-number" pattern="\d{13,16}">
                        </div>
                        <div class="input-group">
                            <label for="card-holder">Nome Impresso no Cart√£o</label>
                            <input type="text" id="card-holder" name="card-holder">
                        </div>
                        
                        <div class="form-row">
                            <div class="input-group">
                                <label for="expiry">Validade (MM/AA)</label>
                                <input type="text" id="expiry" name="expiry" placeholder="MM/AA" pattern="\d{2}/\d{2}" maxlength="5">
                            </div>
                            <div class="input-group">
                                <label for="cvv">CVV</label>
                                <input type="text" id="cvv" name="cvv" maxlength="4" pattern="\d{3,4}">
                            </div>
                        </div>
                    </fieldset>
                </div>

                <div id="pix-content" class="payment-content">
                    <div class="info-box pix-info">
                        <h3>Pagamento via Pix</h3>
                        <p>Ap√≥s clicar em "Pagar e Assinar", voc√™ ser√° direcionado para a tela de pagamento com o c√≥digo Pix para leitura ou c√≥pia.</p>
                        <p>A aprova√ß√£o √© **imediata**.</p>
                    </div>
                </div>

                <div id="boleto-content" class="payment-content">
                    <div class="info-box boleto-info">
                        <h3>Pagamento via Boleto</h3>
                        <p>O boleto ser√° gerado e enviado para seu e-mail (ou dispon√≠vel para download ap√≥s a compra).</p>
                        <p>A aprova√ß√£o pode levar at√© **3 dias √∫teis** ap√≥s o pagamento.</p>
                    </div>
                </div>

                <button type="submit" class="btn secondary">Pagar e Assinar</button>
            </form>
        </div>

        <div class="order-summary-section">
            <h2 class="summary-title">Resumo do Pedido</h2>
            
            <div id="plan-not-found" class="plan-details" style="display: none;">
                <div class="error-message">
                    <h3>‚ö†Ô∏è Plano n√£o encontrado</h3>
                    <p>Por favor, selecione um plano v√°lido na p√°gina inicial.</p>
                    <a href="../index.html#planos" class="btn-back">Voltar para Planos</a>
                </div>
            </div>

            <div id="plan-details" class="plan-details">
                <div class="plan-item">
                    <span>Plano Selecionado:</span>
                    <strong id="selected-plan">Carregando...</strong>
                </div>
                <div class="plan-item">
                    <span>Per√≠odo:</span>
                    <strong>Mensal</strong>
                </div>
            </div>

            <hr>

            <div class="price-details">
                <div class="price-item">
                    <span>Subtotal:</span>
                    <span id="subtotal-price">R$ 0,00</span>
                </div>
                <div class="price-item discount">
                    <span>Desconto:</span>
                    <span>R$ 0,00</span>
                </div>
                <div class="price-item total">
                    <strong>Total a Pagar:</strong>
                    <strong id="total-price">R$ 0,00</strong>
                </div>
            </div>

            <div class="security-info">
                <p>üîí Transa√ß√£o 100% Segura. Seus dados s√£o criptografados.</p>
            </div>
        </div>
    </main>

    <script>
        // Configura√ß√£o dos planos
        const planosConfig = {
            premium: {
                nome: 'Premium',
                preco: 34.00
            },
            profissional: {
                nome: 'Profissional',
                preco: 74.00
            }
        };

        // Fun√ß√£o para obter par√¢metro da URL
        function getURLParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Fun√ß√£o para formatar pre√ßo
        function formatarPreco(valor) {
            return `R$ ${valor.toFixed(2).replace('.', ',')}`;
        }

        // Fun√ß√£o para carregar dados do plano
        function carregarPlano() {
            const planoParam = getURLParameter('plano');
            
            if (!planoParam || !planosConfig[planoParam.toLowerCase()]) {
                // Plano n√£o encontrado
                document.getElementById('plan-details').style.display = 'none';
                document.getElementById('plan-not-found').style.display = 'block';
                document.querySelector('.price-details').style.display = 'none';
                document.querySelector('.security-info').style.display = 'none';
                document.querySelector('.payment-form').style.display = 'none';
                document.title = 'Plano n√£o encontrado - ExcelncIA';
                return;
            }

            const plano = planosConfig[planoParam.toLowerCase()];
            
            // Atualizar informa√ß√µes na tela
            document.getElementById('selected-plan').textContent = plano.nome;
            document.getElementById('subtotal-price').textContent = formatarPreco(plano.preco);
            document.getElementById('total-price').textContent = formatarPreco(plano.preco);
            
            // Atualizar t√≠tulo da p√°gina
            document.title = `Checkout - Plano ${plano.nome} - ExcelncIA`;
        }

        // Fun√ß√£o para mostrar conte√∫do de pagamento
        function showPaymentContent(contentId) {
            const contents = document.querySelectorAll('.payment-content');
            contents.forEach(content => {
                content.classList.remove('active');
                const inputs = content.querySelectorAll('input');
                inputs.forEach(input => {
                    input.required = false;
                });
            });

            const activeContent = document.getElementById(contentId);
            activeContent.classList.add('active');
            
            if (contentId === 'card-content') {
                const cardInputs = activeContent.querySelectorAll('input');
                cardInputs.forEach(input => {
                    input.required = true;
                });
            }
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            carregarPlano();
            
            // Tornar campos do cart√£o obrigat√≥rios por padr√£o
            const cardInputs = document.getElementById('card-content').querySelectorAll('input');
            cardInputs.forEach(input => {
                input.required = true;
            });
        });
    </script>

    <style>
        .error-message {
            text-align: center;
            padding: 40px 20px;
            color: #ff4757;
        }

        .error-message h3 {
            margin-bottom: 20px;
            font-size: 24px;
        }

        .error-message p {
            margin-bottom: 30px;
            color: #e0e6e8;
        }

        .btn-back {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #00d4ff 0%, #0099ff 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-back:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.3);
        }
    </style>
</body>
</html>